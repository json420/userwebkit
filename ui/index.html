<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>foo</title>
<style>
body {
    font-family: Ubuntu;
    font-size: 16px;
    background-color: #fff;
    color: #000;
    text-align: center;
}
</style>
<script src="couch.js"></script>
<script src="base.js"></script>
<script>
"use strict"; 

// The `novacut` CouchDB database:
var db = new couch.Database('novacut');

function hello() {
    $('button').onclick = click;
    var s = new couch.Server();
    $('hello').textContent = 'Demo is talking to CouchDB ' + s.get_sync()['version'];
}

function click() {
    var b = $('button');
    b.classList.toggle('active');
    var active = b.classList.contains('active');
    b.textContent = active ? 'Stop' : 'Start';
    Signal.send('toggle', active);
}

Signal.connect('timer',
    function(count) {
        $('timer').textContent = count;
        Signal.emit('echo', count * 2);
    }
);

Signal.connect('echo',
    function(count) {
        $('echo').textContent = count;
    }
);

</script>
</head>
<body onload="hello()">
<p id="hello"></p>
<p>
<button id="button">Start</button>
<a href="http://novacut.com/">A test link</a>
<strong>timer:</strong> <span id="timer"></span>
<strong>echo:</strong> <span id="echo"></span>
</p>
<video controls width="640" height="360" src="dmedia:TQVPUCFGL23KWPKPVDXP3BB2ZQWPTYMNDMR55QZZ5A2QLDBK">
</body>
</html>
