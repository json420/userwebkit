#!/usr/bin/make -f

PYTHON3=$(shell py3versions -vr)

%:
	dh $@ --with=python3

test-python%:
	unset GTK_MODULES && xvfb-run -a -s "-screen 0 1280x720x24 -noreset" python$* setup.py test

override_dh_auto_install:
	for pyvers in $(shell py3versions -vr); do \
		python$$pyvers setup.py install \
				--install-layout=deb \
				--root $(CURDIR)/debian/python3-userwebkit; \
	done

override_dh_auto_test: $(PYTHON3:%=test-python%)

